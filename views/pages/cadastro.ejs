<%- contentFor( 'body') %>

<div class="table-responsive-xl ">
    <h2> Dados cadastrais</h2>
    <p>Lista de usuários cadastrais no sistema.</p>
    <table class="table table-hover bg-light" id="list">
        <thead class="thead-dark">
        <tr>
            <th>Nome</th>
            <th>Endereço</th>
            <th>Email</th>
            <th>idade</th>
            <th>Altura</th>
            <th>Vota?</th>
            <th>Editar</th>
            <th>Remover</th>
        </tr>
        </thead>
        <tbody>
                <% let linkRemove="/cadastro/remove/"; %>
                <% let linkUpdate="/cadastro/update/"; %>

                <% if(usuarios.length >0){%>
                    <% for(let index=0;index<usuarios.length;index++){ %>
                        <tr data-index-row="<%= index %>">
                            
                        <td data-index-row="<%=index%>">
                            <span  class="show"><%= usuarios[index].name %></span>
                            <input type="text" name="name"  class="hidden" value="<%= usuarios[index].name %>">
                        </td>
                        <td data-index-row="<%=index%>">
                            <span  class="show"><%= usuarios[index].endereco %></span>
                            <input type="text" name="endereco"  class="hidden" value="<%= usuarios[index].endereco %>">
                        </td>
                        <td data-index-row="<%=index%>">
                            <span  class="show"><%= usuarios[index].email %></span>
                            <input type="text" name="email"  class="hidden" value="<%= usuarios[index].email %>">
                        </td>
                        <td data-index-row="<%=index%>">
                            <span  class="show"><%= usuarios[index].age %></span>
                            <input type="text" name="age"  class="hidden" value="<%= usuarios[index].age %>">
                            
                        </td>
                        <td data-index-row="<%=index%>">
                            <span  class="show"><%= usuarios[index].height %></span> 
                            <input type="text" name="height"  class="hidden" value="<%= usuarios[index].height %>">
                            
                        </td>
                        <td data-index-row="<%=index%>">
                            <span  class="show"><%= usuarios[index].vote %></span>
                            <input type="text" name="vote" class="hidden" value="<%= usuarios[index].vote %>">
                            
                        </td>
                        <td data-index-row="<%=index%>" class="hidden" data-index-row="<%=index%>">
                            <input type="button" value="Atualizar" class="hidden" >
                        </td>
                        <!-- a funcao update()  foi criada no arquivo script.js presente no diretorio public. Ela fará a modificação dos itens e envio dos dados na forma de uma string para o servidor usando como rta /cadastro/update/ -->
                        <td  data-index-row="<%= index %>">
                            <a href="#" onclick="update('<%=index%>','<%= linkUpdate %>')" class="show"><i class="fas fa-pen"></i></a>  
                        </td> 
                        
                        <!-- para passar parametros para uma rota criada basta usar o delimitador "/" entre os valores dos parametros e defini-los no arquivo de rotas usando ":" para separar cada valor, seguido de um nome que identificarar esse valor. Exemplo: /cadastro/remove/:id -->
                        <td  data-index-row="<%= index %>">
                            <!-- <a href="#" class="show" onclick="remove('<%=index %>','<%=linkRemove%>')"><i class="fas fa-trash-alt"></i></a> -->
                             <a href="#" class="show" onclick="remove('<%=index %>','<%=usuarios[index].name %>','<%=linkRemove%>')"><i class="fas fa-trash-alt"></i></a> 
                        </td>
                        </tr>
                    <% } //for %>
                <% }else{%>
                    <tr><td colspan="7"><p class="bg-info text-white">Nenhum dado cadastrado</p></td></tr>
                <%} //If-Else %>   
        </tbody>
    </table>

    <h2>Cadastrar novo usuário</h2>
    <form action="/cadastro/add" method="post">
        <div class="form-group">
            <label for="_name">Nome:</label>
            <input type="text" name="_name" id="_name" class="form-control">
        </div>
        <div class="form-group">
            <label for="_email">E-mail:</label>
            <input type="text" name="_email" id="_email" class="form-control">
        </div>
        <div class="form-group">
            <label for="_address">Endereço:</label>
            <input type="text" name="_address" id="_address" class="form-control">
        </div>
        <div class="form-group">
            <label for="_heigth">Altura:</label>
            <input type="text" name="_heigth" id="_heigth" class="form-control">
        </div>
        <div class="form-group">
            <label for="_age">Idade:</label>
            <input type="text" name="_age" id="_age" class="form-control">
        </div>
        <div class="form-group">
            <label for="_vote">Votou:</label>
            <input type="text" name="_vote" id="_vote" class="form-control">
        </div>
        <div class="form-group">
            <input type="submit" value="Enviar"  class="btn btn-success">
        </div>
    </form>

</div>